
<div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row center">
                            <div class="col-lg-2 ">
                                    <a  class="btn btn-outline-info btn-g"> <i class="fa  fa-plus icon"></i> Nuevo Paciente</a>&nbsp;               
                            </div>
                            <div class="col-lg-2">
                                    <a  class="btn btn-outline-info btn-g"> <i class="fa  fa-file-excel-o icon"></i> Exportar Excel </a>&nbsp;    
                                       
                            </div>
                            <div class="col-lg-2">
                                    <a  class="btn btn-outline-info btn-g"> <i class="fa  fa-file-pdf-o"></i> Exportar Pdf </a>&nbsp;    
                                       
                            </div>
                               
                        </div>
                        <div class="row">
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <b><label class="control-label">Buscar</label></b>
                                    <input #input (keyup)="buscarPaciente( input.value)" type="search" class="form-control" >
                                </div>
                            </div>
                            <div class="col-lg-2">
                                <div class="form-group">
                                    <b><label class="control-label">Estatus</label></b>
                                    <select #select class="form-control custom-select" (change)="buscarPacienteEstatus( select.value)" >
                                        <option value='1'>Activos</option>
                                        <option value='0'>Inactivos</option>
                                        
                                    </select>
                                </div>

                            </div>
                            <div class="col-lg-3">
                                <div class="form-group">
                                    <b><label class="control-label">Fecha desde</label></b>
                                    <input type="date" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="form-group">
                                    <b><label class="control-label">Fecha hasta</label></b>
                                    <input type="date" class="form-control">
                                </div>

                            </div>
                    
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
                    <div *ngIf="paciente.length>0" class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h3 class="card-title">Pacientes Registrados (<small>{{ totalRegistro }}</small>)</h3>
                              
                                <div class="table-responsive">
                                    <table class="table table-hover ">
                              
                                    <thead>
                                        <tr>
                                            <th hidden="hidden">Id</th>
                                            <th>Nombre</th>
                                            <th>Tel√©fono</th>
                                            <th>Fecha de Nacimiento</th>
                                            <th>Fecha Ingreso</th>
                                            <th>Estatus</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let p of paciente" >
                                            <td hidden="hidden">{{p._id}}</td>
                                           
                                            <td>{{p.nombre}}</td>
                                            
                                            <td>{{p.telefono}}</td>
                                            <td><span class="text-muted"> {{p.fechaNacimiento | fecha:10}} <i *ngIf="p.fechaNacimiento | fecha:10 === fecha_actual" class="mdi mdi-cake text-primary"></i> </span></td>
                                           
                                            <td><span class="text-muted"> {{p.fechaAlta | fecha:10}} </span></td>
                                            <td> 
                                            <span *ngIf="p.estatus=='1'" class="label label-success">Activo</span>
                                            <span *ngIf="p.estatus=='0'" class="label label-danger">Inactivo</span>
                                            </td>
                                            <td>
                                                    <button id="botonsito" routerLink="/verpaciente/{{p._id}}"  ngbPopover="Preciona para editar la informacion del paciente" triggers="mouseenter:mouseleave" popoverTitle="Editar" class="btn btn-info btn-circle"><i class="mdi mdi-account-edit"></i></button>
                                                    <button  *ngIf="p.estatus=='1'" id="botonsito" (click)="desactivar(p)"  ngbPopover="Preciona para desactivar al paciente" triggers="mouseenter:mouseleave" popoverTitle="Desactivar" class="btn btn-danger btn-circle"><i class="mdi mdi-account-off"></i></button>
                                                    <button *ngIf="p.estatus=='0'" id="botonsito" (click)="reactivar(p)" ngbPopover="Preciona para reactivar al paciente" triggers="mouseenter:mouseleave" popoverTitle="Reactivar" class="btn btn-success btn-circle"><i class="mdi mdi-account-check"></i></button>                                                       
                                                          

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <br>
                                <button (click)="cambiarDesde(-5)"id="botonsito"  title="Desactivar" class="btn btn-secondary btn-rounded"><i class="fa  fa-chevron-left"></i> Anterior</button>
                                <button  (click)="cambiarDesde(5)"id="botonsito"  title="Desactivar" class="btn btn-secondary btn-rounded"><i class="fa  fa-chevron-right"></i> Siguiente</button>
                                               
                            </div>
                        </div>
                    </div>
                    <div *ngIf="paciente.length===0"class="col-12">
                        <div class="alert alert-info">
                            No se encontro ningun paciente..
                        </div>
                    </div>
                    
                </div>
 <!--<ng-template #nuevoCliente let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Nuevo Cliente</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
       CONTENIDO DEL MODAL-->
       <!--  <form >

       <div class="row">
            <div class="col-md-6">
                    <div class="form-group ">
                        <label class="control-label">ejemplo</label>
                        <input type="text"  class="form-control" >
                        </div>
                </div>
                <div class="col-md-6">
                        <div class="form-group ">
                            <label class="control-label">ejemplo</label>
                            <input type="text"  class="form-control" >
                            </div>
                    </div>
       </div>
       <div class="row">
            <div class="col-md-6">
                    <div class="form-group ">
                        <label class="control-label">ejemplo</label>
                        <input type="text"  class="form-control" >
                        </div>
                </div>
                <div class="col-md-6">
                        <div class="form-group ">
                            <label class="control-label">ejemplo</label>
                            <input type="text"  class="form-control" >
                            </div>
                    </div>
       </div>
       <br>
       <button title="Guardar" class="btn btn-success "><i class="fa fa-save"></i> Guardar</button>
            
         </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
 </ng-template> -->
<ng-template #editar let-modal>
    <div class="modal-header">
       <h4 class="modal-title">Editar Paciente</h4>
       <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
       <span aria-hidden="true">&times;</span>
       </button>
    </div>
    <form #editarPaciente="ngForm" ngNativeValidate (ngSubmit)="actualizarPaciente(editarPaciente)">
            
    <div class="modal-body">
        <!--CONTENIDO DEL MODAL-->
        <div class="form-body">
                 <div class="row p-t-20">
                    <input hidden="hidden" [(ngModel)]="editado._id" name="id" type="text"  class="form-control"  >
                    <div class="col-md-4">
                      <div class="form-group">
                          <label class="control-label">Nombre(s)</label>
                          <input [(ngModel)]="editado.nombre" name="nombre" type="text"  class="form-control" required >
                           </div>
                  </div>
                  <div class="col-md-4">
                        <div class="form-group ">
                            <label class="control-label">Apellido Paterno</label>
                            <input [(ngModel)]="editado.app" name="app"type="text"  class="form-control" required>
                             </div>
                    </div>
                  <!--/span-->
                
                        <div class="col-md-4">
                          <div class="form-group ">
                              <label class="control-label">Apellido Materno</label>
                              <input  [(ngModel)]="editado.apm" name="apm" type="text"  class="form-control" >
                              </div>
                      </div>

                 
                  <!--/span-->
              </div>
            <div class="row">
                                 
                    <div class="col-md-4">
                          <div class="form-group ">
                              <label class="control-label">Estado civil</label>
                              <select  [(ngModel)]="editado.estadocivil"name="estadocivil"  class="form-control custom-select">
                                    <option *ngFor="let estado of estadosCiviles" value="{{estado}}" >{{estado}}</option>
                                        
                                  
                              </select>
                               </div>
                      </div>
                        
                        <div class="col-md-4">
                              <div class="form-group ">
                                  <label class="control-label">Religi√≥n</label>
                                  <input [(ngModel)]="editado.religion" name="religion"type="text"  class="form-control" >
                                  </div>
                          </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="control-label">Direccci√≥n</label>
                                <input [(ngModel)]="editado.direccion" name="direccion" type="text"  class="form-control" required >
                         </div>
                        </div>
                        
                       
                    </div>
                    <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label class="control-label">Fecha de nacimiento</label>
                                    <input [(ngModel)]="editado.fechanacimiento" (blur)='calcularEdad()' name="fechanacimiento"type="date" class="form-control" required placeholder="dd/mm/aaaa">
                                </div>
                            </div>
                          <div class="col-md-2">
                            <div class="form-group ">
                                <label class="control-label">Edad</label>
                                <input [(ngModel)]="editado.edad"  id="edad"name="edad" type="text" disabled class="form-control" required >
                                </div>
                        </div>
                        <div class="col-md-7">
                            <div class="form-group">
                                <label class="control-label">Motivo por el cu√°l decidiste asistir</label>
                                <input [(ngModel)]="editado.motivo" name="motivo" type="text"   class="form-control" >
                             
                            </div>
                        </div>
                            
                        </div>
                        <div class="row">
                                <div class="col-md-4">
                                        <div class="form-group ">
                                            <label class="control-label">¬øPor qu√© Medio se entero?</label>
                                            <input [(ngModel)]="editado.medio" name="medio" type="text"  class="form-control" >
                                            </div>
                                    </div>
                                <div class="col-md-4">
                                      <div class="form-group">
                                          <label class="control-label">Recomendado</label>
                                          <select [(ngModel)]="editado.recomendado" name="recomendado" class="form-control custom-select">
                                                <option *ngFor="let r of recomendado" value="{{r}}">{{r}}</option>
                                               
                                                
                                            </select>

                                      </div>
                                  </div>
                                    
                                    <div class="col-md-4">
                                      <div class="form-group ">
                                          <label class="control-label">¬øQui√©n lo recomendo?</label>
                                          <input [(ngModel)]="editado.quienrecomendo" name="quienrecomendo" type="text"  class="form-control" >
                                           </div>
                                  </div>
                                </div>
                                <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group ">
                                                <label class="control-label">Sexo</label>
                                                <select [(ngModel)]="editado.sexo" name="sexo" class="form-control custom-select">
                                                    <option *ngFor="let sex of sexo" value="{{sex}}">{{sex}}</option>
                                                   
                                                    
                                                </select>
                                                 </div>
                                        </div>
                                      <div class="col-md-4">
                                        <div class="form-group ">
                                            <label class="control-label">Tel√©fono</label>
                                            <input [(ngModel)]="editado.telefono" name="telefono" type="text"   class="form-control" required >
                                            </div>
                                    </div>
                                    <div class="col-md-4">
                                            <div class="form-group ">
                                                <label class="control-label">Email</label>
                                                <input [(ngModel)]="editado.email" disabled name="email" type="email"   class="form-control" required >
                                                </div>
                                        </div>
                                       
                                    </div> 
               
        </div>
    </div>
    <div class="modal-footer">
       <button type="submit" class="btn btn-success" ><i class="fa fa-save"></i> Guardar</button>
    
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
</form> 
</ng-template>

<ng-template #dieta let-modal>
        <div class="modal-header">
           <h4 class="modal-title">Asignar dieta</h4>
           <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
           <span aria-hidden="true">&times;</span>
           </button>
        </div>
        <form #dietaPaciente="ngForm" ngNativeValidate (ngSubmit)="dPaciente(dietaPaciente)">
                
                
            <div class="modal-body">

                <h6>Dieta Anterior</h6>
                <hr>
                <div *ngIf="dietaAnt===false" class="alert alert-info">
                        Aun no has asignado ninguna dieta.
                 </div>
                <div *ngIf="dietaAnt===true"class="form-group">
                        <label>Dieta: </label>
                        <select [(ngModel)]="dietaA" name="anterior" disabled  class="form-control custom-select" required>
                            <option  *ngFor="let d of dietas" value="{{d._id}}">({{d.tipopersona}}) {{d.nombre}}</option>
                                                          
                        </select>
                        </div>
                <h6>Asignar Nueva dieta</h6>
                <hr>
                    <div class="form-group">
                        <label >Antes de asignar una dieta recuerda los antecedentes del paciente:</label>
                        <div  class="alert alert-info">
                               {{antecedentes}}
                        </div>
                        
                    </div>
                    
                   
                    <div class="form-group">
                            <label for="comment">Recomendaciones:</label>
                            <textarea  name="recomendaciones"  ngModel class="form-control" required rows="3"></textarea>
                    </div>

                    <div class="form-group">
                            <label>Dieta:</label>
                            <div class="input-group">
                                <select  name="dieta" ngModel value="{{dietaselect}}"class="form-control custom-select" required>
                                    <option  *ngFor="let d of dietas" value="{{d._id}}">({{d.tipopersona}}) {{d.nombre}}</option>
                                                                
                                </select>
                                <button class="btn btn-info" (click)="modalbuscar(buscar)"><i class="fa fa-search"></i></button>
                            </div>     
                    </div>
            </div>
        
        <div class="modal-footer">
           <button type="submit" class="btn btn-success" ><i class="fa fa-save"></i> Guardar</button>
        
            <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
        </div>
    </form> 
    </ng-template>
<ng-template #expediente let-modal>
        <div class="modal-header">
                <h4 class="modal-title">Expediente Paciente</h4>
                <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
                </button>
             </div>
            
             <div class="modal-body">
                    <div class="card">
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs profile-tab" role="tablist">
                                <li id="letra"class="nav-item"> <a class="nav-link active" role="tab" aria-expanded="true" href="#home" data-toggle="tab">Exploracion</a> </li>
           
                                <li id="letra"class="nav-item"> <a class="nav-link" role="tab" aria-expanded="false" href="#medidas" data-toggle="tab">Medidas</a> </li>
                                <li id="letra"class="nav-item"> <a class="nav-link" role="tab" aria-expanded="false" href="#metas" data-toggle="tab">Metas</a> </li>
                              
                            </ul>
                            <!-- Tab panes -->
                          
                            <div class="tab-content">
                                    <div class="tab-pane " id="metas" role="tabpanel" aria-expanded="true">
                                        <form #metaform ngNativeValidate (ngSubmit)="actualizarMetas(metaform)">   
                                        
                                            <div *ngIf="mostrarmeta===true"  class="card-body">
                                                
                                                
                                                <div class="row">
                                                        <div class="col-md-12">
                                                                <div class="form-group row">
                                                                    <label class="control-label text-lefth col-md-2">Peso (kg)</label>
                                                                   <div class="col-3">
                                                                        <div class="switch">
                                                                                <label>
                                                                                  No
                                                                                  <input name="peso" id="peso" [checked]="m.peso"   (click)="metas('peso','pesometa','pesokg');cambiar('peso');"  type="checkbox">
                                                                                  <span class="lever"></span>
                                                                                  Fijar
                                                                                </label>
                                                                              </div>
                                                                   </div>
                                                                   <div class="col-md-3">
                                                                       <select id="pesometa" [(ngModel)]="m.pesometa" name="pesometa"  class="form-control custom-select">
                                                                            <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                                                            
                                                                       </select>
                                                                        
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                    <label>Hasta</label>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <input id="pesokg" [(ngModel)]="m.pesokg" name="pesokg" class="form-control" type="number">
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Kg</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                    
                                                </div>
                                                <hr>
                                                <div class="row">
                                                        <div class="col-md-12">
                                                                <div class="form-group row">
                                                                    <label class="control-label text-lefth col-md-2">Cintura (cm)</label>
                                                                   <div class="col-3">
                                                                        <div class="switch">
                                                                                <label>
                                                                                  No
                                                                                  <input id="cintura" [checked]="m.cintura" (click)="metas('cintura','cinturameta','cinturacm');cambiar('cintura');"  type="checkbox">
                                                                                  <span class="lever"></span>
                                                                                  Fijar
                                                                                </label>
                                                                              </div>
                                                                   </div>
                                                                   <div class="col-md-3">
                                                                       <select id="cinturameta" [(ngModel)]="m.cinturameta" name="cinturameta" class="form-control custom-select">
                                                                            <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                                                       
                                                                       </select>
                                                                        
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Hasta</label>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <input id="cinturacm" [(ngModel)]="m.cinturacm" name="cinturacm"  class="form-control" type="number">
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Cm</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                   
                                                </div>
                                                <hr>
                                                <div class="row">
                                                        <div class="col-md-12">
                                                                <div class="form-group row">
                                                                    <label class="control-label text-lefth col-md-2">Abdomen (cm)</label>
                                                                   <div class="col-3">
                                                                        <div class="switch">
                                                                                <label>
                                                                                  No
                                                                                  <input id="abdomen" [checked]="m.abdomen"  (click)="metas('abdomen','abdomenmeta','abdomencm');cambiar('abdomen');" type="checkbox">
                                                                                  <span class="lever"></span>
                                                                                  Fijar
                                                                                </label>
                                                                              </div>
                                                                   </div>
                                                                   <div class="col-md-3">
                                                                       <select id="abdomenmeta" [(ngModel)]="m.abdomenmeta" name="abdomenmeta" disabled class="form-control custom-select">
                                                                            <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                                                       
                                                                       </select>
                                                                        
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Hasta</label>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <input id="abdomencm" [(ngModel)]="m.abdomencm" name="abdomencm" disabled class="form-control" type="number">
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Cm</label>
                                                                    </div>
                                                                </div>
                                                            </div>
 
                                                </div>
                                                <hr>
                                                <div class="row">
                                                        <div class="col-md-12">
                                                                <div class="form-group row">
                                                                    <label class="control-label text-lefth col-md-2">Gluteo (cm)</label>
                                                                   <div class="col-3">
                                                                        <div class="switch">
                                                                                <label>
                                                                                  No
                                                                                  <input id="gluteo" [checked]="m.gluteo" (click)="metas('gluteo','gluteometa','gluteocm');cambiar('gluteo');"  type="checkbox">
                                                                                  <span class="lever"></span>
                                                                                  Fijar
                                                                                </label>
                                                                              </div>
                                                                   </div>
                                                                   <div class="col-md-3">
                                                                       <select id="gluteometa" [(ngModel)]="m.gluteometa" name="gluteometa" class="form-control custom-select">
                                                                            <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                                                       
                                                                       </select>
                                                                        
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Hasta</label>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <input id="gluteocm" [(ngModel)]="m.gluteocm" name="gluteocm" class="form-control" type="number">
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Cm</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                    
                                                </div>
                                                <hr>
                                                <div class="row">
                                                        <div class="col-md-12">
                                                                <div class="form-group row">
                                                                    <label class="control-label text-lefth col-md-2">Brazo (cm)</label>
                                                                   <div class="col-3">
                                                                        <div class="switch">
                                                                                <label>
                                                                                  No
                                                                                  <input id="brazo" [checked]="m.brazo"  (click)="metas('brazo','brazometa','brazocm');cambiar('brazo');" type="checkbox">
                                                                                  <span class="lever"></span>
                                                                                  Fijar
                                                                                </label>
                                                                              </div>
                                                                   </div>
                                                                   <div class="col-md-3">
                                                                       <select id="brazometa" [(ngModel)]="m.brazometa" name="brazometa" class="form-control custom-select">
                                                                            
                                                                            
                                                                            <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                                                       
                                                                       </select>
                                                                        
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Hasta</label>
                                                                    </div>
                                                                    <div class="col-md-2">
                                                                        <input id="brazocm"[(ngModel)]="m.brazocm" name="brazocm" class="form-control" type="number">
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                            <label>Cm</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                   
                                                </div>
                                                <button type="submit" class="btn btn-success"><i class="fa fa-save"></i> Actualizar Metas</button>
                                            </div>
                                           <div *ngIf="mostrarmeta===false" class="card-body">
                                                <div  class="alert alert-info">
                                                        Para poder asignarle metas a tu paciente es necesario que registres sus medidas.
                                                    </div>
                                           </div>
                                         
                                         
                                           
                                        
                                        </form>
                                        </div>
                                <div class="tab-pane active" id="home" role="tabpanel" aria-expanded="true">
                                <form #expediente ngNativeValidate (ngSubmit)="actualizarExpediente(expediente)">
   
                                    <div class="card-body">
                                        <h5>Antecedentes Patologicos</h5>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                        <label for="comment">Exploracion Fisica:</label>
                                                        <textarea [(ngModel)]="exp.exploracion" name="exploracion" class="form-control" required rows="3"></textarea>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                        <label for="comment">Cirugias:</label>
                                                        <textarea [(ngModel)]="exp.cirugias" name="cirugias"class="form-control" required rows="3"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                            <label for="comment">Antecedentes Familiares (¬øQue?,¬øQuien?):</label>
                                                            <textarea [(ngModel)]="exp.antecedentes" name="antecedentes"class="form-control" required rows="3"></textarea>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                        <div class="form-group">
                                                                <label for="comment">En los ultimos dias has presentado (Gastritis, Colitis o Estre√±imiento)</label>
                                                                <select [(ngModel)]="exp.problemas" name="problemas"   class="form-control custom-select">
                                                                        <option *ngFor="let op of opciones" value="{{op}}">{{op}}</option>
                                                                        
                                                                </select>
                                                        </div>
                                                    </div>
                                            </div>                                           
                                            <button type="submit" class="btn btn-success"><i class="fa fa-save"></i> Actualizar</button>
                   
                                    </div>
                                </form>
                                </div>
                                <!--second tab-->
                                
                                   
                                        <div class="tab-pane" id="medidas" role="tabpanel" aria-expanded="false">
                                            
                                        <form #medidaform ngNativeValidate (ngSubmit)="actualizarmedidas(medidaform)">
   
                                            <div class="card-body">
                                            <div class="row">
                                                <div class="col-4">
                                                        <div class="form-group">
                                                                <label class="control-label text-info">Cintura (cm)</label>
                                                                <input [(ngModel)]="exp.cintura" name="cintura" type="number" step="0.1" min="0" required  class="form-control" >
                                                        </div>
                                                </div>
                                                <div class="col-4">
                                                        <div class="form-group">
                                                                <label class="control-label text-info">Abdomen (cm)</label>
                                                                <input [(ngModel)]="exp.abdomen" name="abdomen" type="number" step="0.1" min="0" required    class="form-control" >
                                                        </div>
                                                </div>
                                                <div class="col-4">
                                                        <div class="form-group">
                                                                <label class="control-label text-info">Peso (kg)</label>
                                                                <input [(ngModel)]="exp.peso" name="peso" type="number" step="0.1" min="0" required   class="form-control" >
                                                        </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                    <div class="col-4">
                                                            <div class="form-group">
                                                                    <label class="control-label text-info">Cadera (cm)</label>
                                                                    <input [(ngModel)]="exp.cadera" name="cadera" type="number" step="0.1" min="0" required    class="form-control" >
                                                            </div>
                                                    </div>
                                                    <div class="col-4">
                                                            <div class="form-group">
                                                                    <label class="control-label text-info">Brazo (cm)</label>
                                                                    <input [(ngModel)]="exp.brazo" name="brazo" type="number" step="0.1" min="0" required    class="form-control" >
                                                            </div>
                                                    </div>
                                                    <div class="col-4">
                                                            <div class="form-group">
                                                                    <label class="control-label text-info">Muslo (cm)</label>
                                                                    <input  [(ngModel)]="exp.muslo" name="muslo" type="number" step="0.1" min="0" required    class="form-control" >
                                                            </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                        <div class="col-4">
                                                                <div class="form-group">
                                                                        <label class="control-label text-info">%Grasa corporal </label>
                                                                        <input  [(ngModel)]="exp.grasacorporal" name="grasacorporal" type="number" step="0.1" min="0" required    class="form-control" >
                                                                </div>
                                                        </div>
                                                        <div class="col-4">
                                                                <div class="form-group">
                                                                        <label class="control-label text-info">%Grasa viceral</label>
                                                                        <input [(ngModel)]="exp.grasaviceral" name="grasaviceral" type="number" step="0.1" min="0" required    class="form-control" >
                                                                </div>
                                                        </div>
                                                        <div class="col-4">
                                                                <div class="form-group">
                                                                        <label class="control-label text-info">Estatura (metros)</label>
                                                                        <input  [(ngModel)]="exp.estatura" name="estatura" type="text"  required step="0.1" min="0"  class="form-control" >
                                                                </div>
                                                        </div>
                                                        
                                                    </div>
                                                    <div class="row">
                                                            
                                                                   <div class="col-4">
                                                                           <div class="form-group">
                                                                                   <label class="control-label text-info">Gluteo (cm)</label>
                                                                                   <input  [(ngModel)]="exp.gluteo" name="gluteo" step="0.1" min="0" required     class="form-control" >
                                                                           </div>
                                                                   </div>
                                                            
                                                        </div>
                                                <div class="row">
                                                        <div class="col-md-6">
                                                                <label>IMC</label>
                                                                    <div class="input-group mb-3">
                                                                                    <input [(ngModel)]="exp.imc" name="imc" disabled type="number"  required class="form-control" >
                                                                
                                                                                    <div class="input-group-append">
                                                                                      <button (click)="calcularIMC()" class="btn btn-info" type="button"> Calcular</button>
                                                                                    </div>
                                                                    </div>
                                                                
                                                        </div>
                                            
                                                        <div class="col-md-6">
                                                        
                                                                <div class="form-group">
                                                                            <label class="control-label">Diagnostico de acuerdo a IMC</label>
                                                                            <input [(ngModel)]="exp.diagnosticoimc" name="diagnosticoimc" disabled type="text"  required class="form-control" >
                                                                    </div>
                                                        </div>
                                                   </div>
                                                   <button type="submit" class="btn btn-success"><i class="fa fa-save"></i> Actualizar Medidas</button> 
                                            </div>   
                                        </form>
                                        </div>

                                
                            </div>
                            
                        </div>
                   
            </div>
            <div class="modal-footer">
                     <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
                </div>
            
</ng-template>

<ng-template #grafica let-modal>
        <div class="modal-header">
           <h4 class="modal-title">Evolucion Paciente</h4>
           <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
           <span aria-hidden="true">&times;</span>
           </button>
        </div>
    

     <div *ngIf="mostrargrafica===true" class="card-body">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs profile-tab" role="tablist">
                <li id="letra"class="nav-item"> <a class="nav-link active" role="tab" aria-expanded="true" href="#home" data-toggle="tab">Graficas</a> </li>

                              <li id="letra"class="nav-item"> <a class="nav-link" role="tab" aria-expanded="false" href="#metas" data-toggle="tab">Metas</a> </li>
              
            </ul>
            <!-- Tab panes -->
          
            <div class="tab-content">
                    <div class="tab-pane active " id="home" role="tabpanel" aria-expanded="true">
                              
                                <div class="chart"style = "display:block; width:100%;" >
                                                  <canvas baseChart
                                                          [datasets]="barChartData"
                                                          [labels]="barChartLabels"
                                                          [colors] = "chartColors" 
                                                          [options]="barChartOptions"
                                                          [legend]="barChartLegend"
                                                          [chartType]="barChartType"
                                                          (chartHover)="chartHovered($event)"
                                                          (chartClick)="chartClicked($event)">
                                                </canvas>
                                               </div> 
                        </div>
                <div class="tab-pane " id="metas" role="tabpanel" aria-expanded="true">
                       <br><br>
                        <div class="row">

                                <div class="col-md-12">
                                    
                                        <div class="form-group row">
                                            <label class="control-label text-lefth col-md-2">Peso (kg)</label>
                                           <div class="col-3">
                                                <div class="switch">
                                                        <label>
                                                          No
                                                          <input name="peso" id="peso" [checked]="m.peso"  disabled  type="checkbox">
                                                          <span class="lever"></span>
                                                          Fijada
                                                        </label>
                                                      </div>
                                           </div>
                                           <div class="col-md-2">
                                               <select id="pesometa" [(ngModel)]="m.pesometa" name="pesometa" disabled class="form-control custom-select">
                                                    <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                                    
                                               </select>
                                                
                                            </div>
                                            <div class="col-md-1">
                                            <label>Hasta</label>
                                            </div>
                                            <div class="col-md-2">
                                                <input id="pesokg" [(ngModel)]="m.pesokg" name="pesokg" disabled class="form-control" type="number">
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Kg</label>
                                            </div>
                                            
                                        </div>
                                    </div>
                            
                        </div>
                        <div class="row">
                                <div class="col-md-12">
                                        <strong *ngIf="colorpeso=='green'" class="text-success"><i class="fa fa-smile-o"> </i>{{mensajepeso}} </strong >
                                        <strong *ngIf="colorpeso=='red'" class="text-danger"><i class="fa fa-frown-o"></i> {{mensajepeso}} </strong >
                                        <strong *ngIf="colorpeso=='yellow'" class="text-warning"><i class="fa fa-meh-o"></i>{{mensajepeso}} </strong >
                                          <strong *ngIf="colorpeso=='ninguno'" class="text-info"><i class="fa fa-star"></i>Esta meta no ah sido fijada </strong >
                                      
                                      </div>
                        </div>
                        <hr>
                        <div class="row">
                                <div class="col-md-12">
                                        <div class="form-group row">
                                            <label class="control-label text-lefth col-md-2">Cintura (cm)</label>
                                           <div class="col-3">
                                                <div class="switch">
                                                        <label>
                                                          No
                                                          <input id="cintura" [checked]="m.cintura" disabled  type="checkbox">
                                                          <span class="lever"></span>
                                                          Fijada
                                                        </label>
                                                      </div>
                                           </div>
                                           <div class="col-md-2">
                                               <select id="cinturameta" [(ngModel)]="m.cinturameta" name="cinturameta" disabled class="form-control custom-select">
                                                    <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                               
                                               </select>
                                                
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Hasta</label>
                                            </div>
                                            <div class="col-md-2">
                                                <input id="cinturacm" [(ngModel)]="m.cinturacm" name="cinturacm" disabled class="form-control" type="number">
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Cm</label>
                                            </div>
                                            
                                        </div>
                                    </div>
                           
                        </div>
                        <div class="row">
                                <div class="col-md-12">
                                        <strong *ngIf="colorcintura=='green'" class="text-success"><i class="fa fa-smile-o"> </i>{{mensajecintura}} </strong >
                                          <strong  *ngIf="colorcintura=='red'" class="text-danger"><i class="fa fa-frown-o"></i> {{mensajecintura}} </strong >
                                            <strong  *ngIf="colorcintura=='yellow'" class="text-warning"><i class="fa fa-meh-o"></i>{{mensajecintura}} </strong >
                                              <strong *ngIf="colorcintura=='ninguno'" class="text-info"><i class="fa fa-star"></i>Esta meta no ah sido fijada </strong >
                                      
                                        </div>
                        </div>
                        <hr>
                        <div class="row">
                                <div class="col-md-12">
                                        <div class="form-group row">
                                            <label class="control-label text-lefth col-md-2">Abdomen (cm)</label>
                                           <div class="col-3">
                                                <div class="switch">
                                                        <label>
                                                          No
                                                          <input id="abdomen" [checked]="m.abdomen"  disabled type="checkbox">
                                                          <span class="lever"></span>
                                                          Fijada
                                                        </label>
                                                      </div>
                                           </div>
                                           <div class="col-md-2">
                                               <select id="abdomenmeta" [(ngModel)]="m.abdomenmeta" name="abdomenmeta" disabled class="form-control custom-select">
                                                    <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                               
                                               </select>
                                                
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Hasta</label>
                                            </div>
                                            <div class="col-md-2">
                                                <input id="abdomencm" [(ngModel)]="m.abdomencm" name="abdomencm" disabled class="form-control" type="number">
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Cm</label>
                                            </div>
                                            
                                        </div>
                                    </div>
                    
                        </div>
                        <div class="row">
                                <div class="col-md-12">
                                        <strong *ngIf="colorabdomen=='green'" class="text-success"><i class="fa fa-smile-o"> </i>{{mensajeabdomen}} </strong>
                                        <strong *ngIf="colorabdomen=='red'" class="text-danger"><i class="fa fa-frown-o"></i> {{mensajeabdomen}} </strong>
                                        <strong *ngIf="colorabdomen=='yellow'" class="text-warning"><i class="fa fa-meh-o"></i>{{mensajeabdomen}} </strong>
                                        <strong *ngIf="colorabdomen=='ninguno'" class="text-info"><i class="fa fa-star"></i>Esta meta no ah sido fijada </strong >
                                    
                                      </div>
                        </div>
                        <hr>
                        <div class="row">
                                <div class="col-md-12">
                                        <div class="form-group row">
                                            <label class="control-label text-lefth col-md-2">Gluteo (cm)</label>
                                           <div class="col-3">
                                                <div class="switch">
                                                        <label>
                                                          No
                                                          <input id="gluteo" [checked]="m.gluteo" disabled  type="checkbox">
                                                          <span class="lever"></span>
                                                          Fijada
                                                        </label>
                                                      </div>
                                           </div>
                                           <div class="col-md-2">
                                               <select id="gluteometa" [(ngModel)]="m.gluteometa" name="gluteometa" disabled class="form-control custom-select">
                                                    <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                               
                                               </select>
                                                
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Hasta</label>
                                            </div>
                                            <div class="col-md-2">
                                                <input id="gluteocm" [(ngModel)]="m.gluteocm" name="gluteocm" disabled class="form-control" type="number">
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Cm</label>
                                            </div>
                                            
                                        </div>
                                    </div>
                            
                        </div>
                        <div class="row">
                                <div class="col-md-12">
                                        <strong *ngIf="colorgluteo=='green'" class="text-success"><i class="fa fa-smile-o"> </i>{{mensajegluteo}} </strong>
                                        <strong *ngIf="colorgluteo=='red'" class="text-danger"><i class="fa fa-frown-o"></i> {{mensajegluteo}} </strong>
                                        <strong *ngIf="colorgluteo=='yellow'" class="text-warning"><i class="fa fa-meh-o"></i>{{mensajegluteo}} </strong>
                                        <strong *ngIf="colorgluteo=='ninguno'" class="text-info"><i class="fa fa-star"></i>Esta meta no ah sido fijada </strong >
                                    </div>
                        </div>
                        <hr>
                        <div class="row">
                                <div class="col-md-12">
                                        <div class="form-group row">
                                            <label class="control-label text-lefth col-md-2">Brazo (cm)</label>
                                           <div class="col-3">
                                                <div class="switch">
                                                        <label>
                                                          No
                                                          <input id="brazo" [checked]="m.brazo"  disabled type="checkbox">
                                                          <span class="lever"></span>
                                                          Fijada
                                                        </label>
                                                      </div>
                                           </div>
                                           <div class="col-md-2">
                                               <select id="brazometa" [(ngModel)]="m.brazometa" name="brazometa" disabled class="form-control custom-select">
                                                    
                                                    
                                                    <option *ngFor="let m of metafijada" value="{{m}}">{{m}}</option>
                                               
                                               </select>
                                                
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Hasta</label>
                                            </div>
                                            <div class="col-md-2">
                                                <input id="brazocm"[(ngModel)]="m.brazocm" name="brazocm" disabled class="form-control" type="number">
                                            </div>
                                            <div class="col-md-1">
                                                    <label>Cm</label>
                                            </div>
                                            
                                        </div>
                                    </div>
                           
                        </div>
                        <div class="row">
                                <div class="col-md-12">
                                        <strong *ngIf="colorbrazo=='green'" class="text-success"><i class="fa fa-smile-o"> </i>{{mensajebrazo}} </strong>
                                        <strong *ngIf="colorbrazo=='red'" class="text-danger"><i class="fa fa-frown-o"></i> {{mensajebrazo}} </strong>
                                        <strong *ngIf="colorbrazo=='yellow'" class="text-warning"><i class="fa fa-meh-o"></i>{{mensajebrazo}} </strong>
                                        <strong *ngIf="colorbrazo=='ninguno'" class="text-info"><i class="fa fa-star"></i>Esta meta no ah sido fijada </strong >
                                    </div>
                        </div>
                
                
                
                </div>
                <!--second tab-->
                
                   
                        

                
            </div>
            
        </div>
        <div *ngIf="mostrargrafica===false" class="alert alert-info">
                Aun no has registrado las medidas del paciente , para poder ver su evolucion es necesario que las registres!!
            </div> 
      
        <div class="modal-footer">
           
            <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
        </div>
    
    </ng-template>

    <ng-template #buscar let-modal>
            <div class="modal-header">
              <h4 class="modal-title">Buscar Dietas</h4>
              <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click');cancelar()">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
                
            <div  class="modal-body">
                    <input #input (keyup)="buscarPlan (input.value)" type="text" class="form-control" placeholder="Buscar ..."><br><br>
                <div *ngIf="alert===true" class="alert alert-success">
                    Dieta seleccionada <i class="fa fa-check"></i>
                </div>
                <div id="busquedapaciente">
                    <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th hidden="hidden">Id</th>
                                    <th>Nombre</th>
                                    <th>Tipo de persona</th>
                                   
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let d of dietas">
                                    <td hidden="hidden">{{d._id}}</td>
                               
                                    <td>{{d.nombre}}</td>
                                    <td>{{d.tipopersona}}</td>
                                                                  
                                    <td>
                                            <button id="botonsito" (click)="seleccionar(d,buscar)" class="btn btn-success btn-circle"><i class="fa fa-check"></i></button>
                                           
                                          
                                                
                                                  
        
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                </div>
            </div>
            
            <div class="modal-footer">
                
            </div>
         
          </ng-template>